slug: pe-301-lab-2-1-refactor-the-base-profile
id: mgt8lxxgtbv4
type: sandbox
title: 'PE301 Lab 2.1: Refactor the Base Profile'
teaser: Refactor your base profile by moving variables to class parameters so that
  you can reuse the profile in another role without having to duplicate code.
description: |+
  ## Introduction

  Suppose you have a base profile that shows a login message across all the servers in your organization, but now you need to show a different login message for the servers owned by the finance department.

  To do this, you'll create class parameters in your manifests to abstract the data in the base profile that enables specific messaging. Abstracting data from code enables code reuse, which ensures consistency in your code base and means that you spend less time developing and maintaining code.

  Then, you'll externalize the finance department's login message in Hiera.

  You'll discover how to run a Puppet Query Language (PQL) query return nodes with a specific fact and fact value, which can help you to correctly abstract the data from code and troubleshoot as needed.

  At the end of the lab, you'll have configured the finance nodes to department-specific login message by externalizing data to the appropriate yaml configuration file. You'll compare this with the sales department nodes, which show a common login message.

  In this lab, you will refactor your base profile by moving variables to class parameters so that you can reuse the profile in another role without having to duplicate code.


  ## Prerequisites

  [Abstract data from code by using Hiera](https://play.instruqt.com/puppet/tracks/pe-develop-and-maintain-lab-2-0)

  ## Technical recommendations

  For the best lab experience, use [Google Chrome](https://www.google.com/chrome/). Mozilla Firefox, Microsoft Edge, and Apple Safari are not suitable for this lab â€” if you must use one of these browsers, see the [Lab Help Guide](https://puppet-kmo.gitbook.io/practice-lab-help/) for workarounds.

  ## Keep an eye on the clock
  ![20 minute lab](https://storage.googleapis.com/instruqt-images/Clocks%20for%20Track%20Duration/20min100.png) The virtual learning environment will stay up for 45 minutes, however, **this lab should only take about 20 minutes** to complete. When your learning environment expires, your work will not be saved. If you haven't completed the lab, you can simply restart it.

  When you're ready to begin, click **Start track**. When you've completed the lab, click **Stop** (appears at the top of this page after the lab starts).

  Want to try these steps in your own environment? Check out the [job aid](https://puppet-kmo.gitbook.io/job-aids/pe301-develop-and-maintain-labs/refactor-the-base-profile).

icon: https://storage.googleapis.com/instruqt-images/pe301-icon.png
tags:
- ""
- BACKUP
- PE301
owner: puppet
developers:
- jain.waldrip@puppet.com
- greg.larkin@puppet.com
- alex.williamson@puppet.com
- thomas.chisholm@puppet.com
private: true
published: true
show_timer: true
checksum: "1891883719292061449"
